import 'package:sbornik_pervokursnika/data/api/model/api_Post.dart';
import 'package:sbornik_pervokursnika/data/api/model/api_Teg.dart';
import 'package:sbornik_pervokursnika/data/api/request/get_lenta_request_body.dart';


///–ó–∞–≥–ª—É—à–∫–∞ —Å–µ—Ä–≤–∏—Å–∞ –ø–æ–∫–∞ –Ω–µ—Ç –±—ç–∫–∞
class LentaServicePlug{
  final int postpageCap = 3;

  final AllTegs = {
    '–ú–µ—Ö–ú–∞—Ç': false,
    '–ù–æ–≤–æ—Å—Ç–∏': false,
    '–°–∞–º–æ–¥–µ–ª–∫–∞': false,
    '–°–µ—Å—Å–∏—è': false,
    '–î–µ–ø—Ä–µ—Å—Å–∏—è': false,
    'flutter': false,
  };

  final AllPosts = [
    ApiPost.fromApi(
      id: '1',
      title: '–°–ò–¶ –ò–ú–ú–∏–ö–ù',
      text: '''–ö–£–†–°–´ –ü–û –ì–ò–¢ ‚Äº
        –°–æ —Å–ª–µ–¥—É—é—â–µ–π –Ω–µ–¥–µ–ª–∏ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –∫—É—Ä—Å –ø–æ GitHub, –æ—Ä–≥–∞–Ω–∏–∑—É–µ–º—ã–π —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏ 2 –∫—É—Ä—Å–∞ –§–ò–ò–¢. –û–Ω–∏ –ø–æ–º–æ–≥—É—Ç —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –≤ –∞–∑–∞—Ö –ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≥–∏—Ç–æ–º –Ω–∞ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞–Ω–∏—è—Ö. –§–∞–∫—É–ª—å—Ç–∞—Ç–∏–≤ –±—É–¥–µ—Ç —Å–æ—Å—Ç–æ—è—Ç—å –∏–∑ 4-5 –∑–∞–Ω—è—Ç–∏–π —Å –≤–≤–æ–¥–Ω–æ–π –ª–µ–∫—Ü–∏–æ–Ω–Ω–æ–π —á–∞—Å—Ç—å—é –∏ –±—É–¥–µ—Ç –ø—Ä–æ–≤–æ–¥–∏—Ç—å—Å—è –¥–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω–æ. –î–ª—è –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏—è –∑–Ω–∞–Ω–∏–π –≤–æ–∑–º–æ–∂–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è –Ω–∞ –¥–æ–º. –°–∫–æ—Ä–µ–µ –∑–∞–ø–æ–ª–Ω—è–π —Ñ–æ—Ä–º—É –≤–Ω–∏–∑—É!https://forms.gle/kL4keKG4rNwdcqnX8''',
      image: 'assets/images/git_courses.jpg',
      tegs: ['–ù–æ–≤–æ—Å—Ç–∏'],
      timeofcreation: DateTime.parse("1969-07-20 20:18:04Z"),
    ),
    ApiPost.fromApi(
      id: '2',
      title: '–°–ò–¶ –Æ–§–£',
      text: '''–≠–°–¢–ï–¢–ò–ö–ê –í–û –í–°–Å–ú 
        –•—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç ¬´–ì–µ–æ–º–µ—Ç—Ä–∏—è –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞‚Äë5¬ª –æ—Ç–∫—Ä—ã—Ç –¥–æ –∫–æ–Ω—Ü–∞ –Ω–æ—è–±—Ä—è!–ü—Ä–∏—á–∏–Ω—ã –ø—Ä–æ–≤–µ—Å—Ç–∏ —Å–≤–æ–π –¥–µ–Ω—å –∫—É–ª—å—Ç—É—Ä–Ω–æ:–ù–µ —Ç–æ–ª—å–∫–æ –∫–∞—Ä—Ç–∏–Ω—ã! –ü–æ–º–∏–º–æ –∂–∏–≤–æ–ø–∏—Å–∏, —Ç–µ–±—è –∂–¥—É—Ç –≥—Ä–∞—Ñ–∏–∫–∞, —Å–∫—É–ª—å–ø—Ç—É—Ä–∞, —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è –∏ –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–æ-–ø—Ä–∏–∫–ª–∞–¥–Ω–æ–µ –∏—Å–∫—É—Å—Å—Ç–≤–æ.–†–∞–±–æ—Ç—ã –º–æ–ª–æ–¥—ã—Ö –∏–ª–∏ —É–∂–µ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Ö—É–¥–æ–∂–Ω–∏–∫–æ–≤ –∏–∑ –†–æ—Å—Å–∏–∏, –ê–≤—Å—Ç—Ä–∏–∏, –ò—Ç–∞–ª–∏–∏, –£–∫—Ä–∞–∏–Ω—ã –∏ –¥—Ä.–†–∞–±–æ—Ç—ã –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π –≤—ã—Å—à–∏—Ö —Ö—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —É—á–µ–±–Ω—ã—Ö –∑–∞–≤–µ–¥–µ–Ω–∏–π –≥. –†–æ—Å—Ç–æ–≤–∞-–Ω–∞-–î–æ–Ω—É, –∞ —Ç–∞–∫–∂–µ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –∏—Å–∫—É—Å—Å—Ç–≤–∞, –¥–∏–∑–∞–π–Ω–∞ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Å—Ç–∏ –≤—Ä–µ–º—è —Å –ø–æ–ª—å–∑–æ–π, –∞ –≥–ª–∞–≤–Ω–æ–µ ‚Äî –Ω–µ –¥–æ–º–∞‚úäüèª–û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—ã –æ–±–µ—â–∞—é—Ç, —Ä–∞–≤–Ω–æ–¥—É—à–Ω—ã—Ö –Ω–µ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è:üí¨ ¬´–ö–ª—é—á–µ–≤–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—Ä—Ç-–ø—Ä–æ–µ–∫—Ç–∞: –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∫–∞–∫ –≤–∞–∂–Ω–µ–π—à–∞—è –∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞—è —Å–æ—Å—Ç–∞–≤–ª—è—é—â–∞—è –≤ —Ä–µ—à–µ–Ω–∏–∏ –ª—é–±–æ–≥–æ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –ø–ª–∞—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏—Å–∫—É—Å—Å—Ç–≤–∞. –®–∏—Ä–æ–∫–∏–π —Å–ø–µ–∫—Ç—Ä –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–æ–≤ –∫ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—é —Ç–µ–º—ã –ø—Ä–æ–µ–∫—Ç–∞, —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ –≤–∏–¥–æ–≤ –∏ —Ç–µ—Ö–Ω–∏–∫, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –Ω–∞ –≤—ã—Å—Ç–∞–≤–∫–µ –Ω–µ –æ—Å—Ç–∞–≤—è—Ç —Ä–∞–≤–Ω–æ–¥—É—à–Ω—ã–º–∏ –Ω–∏ –æ–¥–Ω–æ–≥–æ –∑—Ä–∏—Ç–µ–ª—è¬ª–ü—Ä–∏—Ö–æ–¥–∏ –∫ –ê–ê–ò‚ù§''',
      image: 'assets/images/estetic.jpg',
      tegs: ['–ú–µ—Ö–ú–∞—Ç'],
      timeofcreation: DateTime.parse("1969-07-20 20:19:04Z"),
    ),
    ApiPost.fromApi(
      id: '3',
      title: '–°–ò–¶ –ò–ú–ú–∏–ö–ù',
      text:
        '–•—ç–π, –º–µ—Ö–º–∞—Ç–æ–≤–µ—Ü! –ë–ª–∏–∑–∏—Ç—Å—è –¥–µ–∫–∞–±—Ä—å, –∞ –≤–º–µ—Å—Ç–µ —Å –Ω–∏–º - —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ü–µ—Ä—Ç! –ò–º–µ–Ω–Ω–æ –∑–¥–µ—Å—å —Ç—ã —Å–º–æ–∂–µ—à—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞—Å–∫—Ä—ã—Ç—å –≤–µ—Å—å —Å–≤–æ–π –º—É–∑—ã–∫–∞–ª—å–Ω—ã–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –∏ –æ–∫—É–Ω—É—Ç—å—Å—è –≤ –∞—Ç–º–æ—Å—Ñ–µ—Ä—É –Ω–∞—Å—Ç–æ—è—â–µ–π –º—É–∑—ã–∫–∏!–•–æ—á–µ—à—å –ø—Ä–∏–Ω—è—Ç—å —É—á–∞—Å—Ç–∏–µ? –ü—Ä–∏—Ö–æ–¥–∏ –Ω–∞ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ –≤ —ç—Ç–æ—Ç —á–µ—Ç–≤–µ—Ä–≥:19 –ù–û–Ø–ë–†–Ø 15:30 120 –ê–£–î–ò–¢–û–†–ò–Ø ',
      image: 'assets/images/music.jpg',
      tegs: ['–ú–µ—Ö–ú–∞—Ç','–°–∞–º–æ–¥–µ–ª–∫–∞'],
      timeofcreation: DateTime.parse("1969-07-20 20:20:04Z"),
    ),
    ApiPost.fromApi(
      id: '4',
      title: '–Æ–§–£(–Æ–∂–Ω—ã–π –§–µ–¥–µ—Ä–∞–ª—å–Ω—ã–π –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç)',
      text:
        '–†–µ–∫—Ç–æ—Ä –∏ –ø—Ä–µ–∑–∏–¥–µ–Ω—Ç –Æ–§–£ –ø—Ä–∏–Ω—è–ª–∏ —É—á–∞—Å—Ç–∏–µ –≤ –ø–æ–¥–≤–µ–¥–µ–Ω–∏–∏ –∏—Ç–æ–≥–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞ ¬´–ó–æ–ª–æ—Ç—ã–µ –ò–º–µ–Ω–∞ –í—ã—Å—à–µ–π –®–∫–æ–ª—ã¬ª–ü—Ä–æ–µ–∫—Ç ¬´–ó–æ–ª–æ—Ç—ã–µ –ò–º–µ–Ω–∞ –í—ã—Å—à–µ–π –®–∫–æ–ª—ã¬ª ‚Äì –µ–∂–µ–≥–æ–¥–Ω—ã–π –∫–æ–Ω–∫—É—Ä—Å–Ω—ã–π –æ—Ç–±–æ—Ä –ø–æ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –≤—É–∑–æ–≤ –∏ –Ω–∞—É—á–Ω—ã—Ö —É—á—Ä–µ–∂–¥–µ–Ω–∏–π —Å–∞–º—ã—Ö –¥–æ—Å—Ç–æ–π–Ω—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª–µ–π –ø—Ä–æ—Ñ–µ—Å—Å–æ—Ä—Å–∫–æ-–ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Å–æ—Å—Ç–∞–≤–∞, –∫–æ—Ç–æ—Ä—ã–µ –∏–º–µ—é—Ç –ª–∏—á–Ω—ã–π —É—Å–ø–µ—Ö, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –≤ —É—á–µ–±–Ω–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ —Å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º –Ω–æ–≤–µ–π—à–∏—Ö –º–µ—Ç–æ–¥–∏–∫, –∞ —Ç–∞–∫–∂–µ –∏–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω—ã—Ö –ø—Ä–∞–∫—Ç–∏–∫ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è. 24 –Ω–æ—è–±—Ä—è —Å–æ—Å—Ç–æ—è–ª–∞—Å—å –æ–Ω–ª–∞–π–Ω –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è, –≥–¥–µ –æ–±—Å—É–¥–∏–ª–∏ –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ã –ø—Ä–æ–µ–∫—Ç–∞ "–ó–æ–ª–æ—Ç—ã–µ –ò–º–µ–Ω–∞ –í—ã—Å—à–µ–π –®–∫–æ–ª—ã", —Å–æ—Ü–∏–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –≤—É–∑–∞, —Ä–∞–±–æ—Ç—É —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —É—á—Ä–µ–∂–¥–µ–Ω–∏–π –≤—ã—Å—à–µ–≥–æ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∏ —Ä–æ–ª—å —É—á–µ–Ω—ã—Ö –≤ —Ä–∞–∑–≤–∏—Ç–∏–∏ –≥—Ä–∞–∂–¥–∞–Ω—Å–∫–æ–≥–æ –æ–±—â–µ—Å—Ç–≤–∞.',
      image: 'assets/images/gold_names.jpg',
      tegs: ['–ù–æ–≤–æ—Å—Ç–∏'],
      timeofcreation: DateTime.parse("1969-07-20 20:21:04Z"),
    ),
      
    ApiPost.fromApi(
      id: '5',
      title: '–Æ–§–£',
      text:
        '–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏: —ç–ø–∏–∑–æ–¥ 14. –ó–∞–≤—Ç—Ä–∞, 26 –Ω–æ—è–±—Ä—è, –≤ –î–µ–Ω—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –∞–Ω–∞–ª–∏—Ç–∏–∫ –ù–¶–ü–¢–ò, –∞—Å–ø–∏—Ä–∞–Ω—Ç –ò–Ω—Å—Ç–∏—Ç—É—Ç–∞ —Å–æ—Ü–∏–æ–ª–æ–≥–∏–∏ –∏ —Ä–µ–≥–∏–æ–Ω–æ–≤–µ–¥–µ–Ω–∏—è –Æ–§–£ –ú–∞–∫—Å–∏–º –ö—É—Ü–µ–Ω–∫–æ —Ä–∞—Å—Å–∫–∞–∂–µ—Ç –æ –∫–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –ù–µ –ø—Ä–æ–ø—É—Å—Ç–∏ –ø—Ä—è–º–æ–π —ç—Ñ–∏—Ä –∏ –±—É–¥—å —Å –Ω–∞–º–∏ ',
      image: 'assets/images/simple_word.jpg',
      tegs: ['–ù–æ–≤–æ—Å—Ç–∏'],
      timeofcreation: DateTime.parse("1969-07-20 20:22:04Z"),
    ),
    ApiPost.fromApi(
      id: '6',
      title: '–°–ò–¶ –Æ–§–£',
      text:
        '–†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø –ù–ê –ó–û–õ–û–¢–û–ô –ì–û–õ–û–° –ï—Å–ª–∏ –≥–æ—Ç–æ–≤ –±—ã—Ç—å —É—Å–ª—ã—à–∞–Ω–Ω—ã–º, –ø—Ä–∏–º–∏ —É—á–∞—Å—Ç–∏–µ –≤ —Å–∞–º–æ–º –≤–∞–∂–Ω–æ–º —Å–æ–±—ã—Ç–∏–∏ –∫–∞–∂–¥–æ–≥–æ –ø–µ–≤—Ü–∞ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞!–ó–∞–ø–æ–ª–Ω–∏ –∑–∞—è–≤–∫—É –Ω–∏–∂–µ –∏ –ø—Ä–∏—Ö–æ–¥–∏ –Ω–∞ –û—Ç–±–æ—Ä–æ—á–Ω—ã–π —ç—Ç–∞–ø, –∫–æ—Ç–æ—Ä—ã–π —Å–æ—Å—Ç–æ–∏—Ç—Å—è —É–∂–µ 28 –∏ 29 –Ω–æ—è–±—Ä—è.–°–ª–µ–¥–∏ –∑–∞ –Ω–æ–≤–æ—Å—Ç—è–º–∏ –ø—Ä–æ–µ–∫—Ç–∞ –≤ –≥—Ä—É–ø–ø–µ –¶–µ–Ω—Ç—Ä–∞ –∫—É–ª—å—Ç—É—Ä—ã –∏ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞ –Æ–§–£. –ö—Å—Ç–∞—Ç–∏, —Ç–∞–º —É–∂–µ –ø–æ—è–≤–∏–ª–æ—Å—å –ø–µ—Ä–≤–æ–µ –∏–Ω—Ç–µ—Ä–≤—å—é —Å —á–ª–µ–Ω–æ–º –∂—é—Ä–∏üî•–ó–∞—è–≤–∫–∏ –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è –¥–æ 26 –Ω–æ—è–±—Ä—è',
      image: 'assets/images/gold_voice.jpg',
      tegs: ['–ú–µ—Ö–ú–∞—Ç','–°–∞–º–æ–¥–µ–ª–∫–∞','–ù–æ–≤–æ—Å—Ç–∏'],
      timeofcreation: DateTime.parse("1969-07-20 20:23:04Z"),
    ),
  ];

  Future<ApiTegList> GetTegs() =>
  Future.delayed(Duration(milliseconds: 100), () {
    return ApiTegList.fromApi(AllTegs.entries.map((e) => ApiTeg.fromApi(e.key,e.value)).toList());
  });


  Future<void> AddTeg(name)async
  {
    AllTegs[name] = true;
  }

  Future<void> RemoveTeg(name)async
  {
    AllTegs[name] = false;
  }

  Future<ApiPostList> GetPosts(GetPostRequestBody body)=>
  Future.delayed(Duration(milliseconds: 100), () {
    var posts = AllPosts;
    if (body.time != null)
    {
      posts = AllPosts.where((e) => e.timeofcreation.isAfter(body.time)).toList();
    }
    List<ApiPost> res =[];  
    if (body.tegs.length > 0)
    {
      for(var p in posts)
      {
        if(p.tegs.any((element) => body.tegs.map((e) => e.name).contains(element)))
        {
          res.add(p);
        }
      }
    }
    else {res = posts;}
    print(res.length);
    return ApiPostList.fromApi(posts: res.length > postpageCap?res.take(postpageCap).toList():res);
  });

  //AddtoFavorites(postid)

  //RemoveFavorites(String postid)
}